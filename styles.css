:root{
  --bg1:#fff0f6;
  --bg2:#ffe8f1;
  --card:#ffffffcc;
  --text:#2b2b2b;
  --accent:#ff4d6d;
  --accent2:#ff8fab;
  --shadow: 0 18px 45px rgba(0,0,0,.12);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  min-height:100vh;
  display:grid;
  place-items:center;
  padding:24px;
  background: radial-gradient(circle at top, var(--bg2), var(--bg1));
  overflow-x:hidden;
}

/* Floating hearts background */
body::before, body::after{
  content:"";
  position:fixed;
  inset:-40px;
  pointer-events:none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(255,77,109,.15) 0 12px, transparent 13px),
    radial-gradient(circle at 70% 30%, rgba(255,143,171,.14) 0 10px, transparent 11px),
    radial-gradient(circle at 35% 60%, rgba(255,77,109,.12) 0 11px, transparent 12px),
    radial-gradient(circle at 80% 75%, rgba(255,143,171,.10) 0 9px, transparent 10px);
  filter: blur(0.5px);
  animation: floaty 10s ease-in-out infinite;
}
body::after{
  opacity:.6;
  animation-duration: 14s;
  transform: translateY(10px);
}

@keyframes floaty{
  0%,100%{ transform: translateY(0px); }
  50%{ transform: translateY(18px); }
}

.card{
  width:min(620px, 92vw);
  background: var(--card);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.6);
  border-radius: 24px;
  padding: 28px;
  box-shadow: var(--shadow);
  text-align:center;
  position:relative;
}

h1{ margin: 0 0 8px; font-size: 1.9rem; }
p{ margin: 0 0 16px; line-height: 1.55; }

.btn-row{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top: 14px;
}

button, a.button, .button{
  appearance:none;
  border:none;
  border-radius:999px;
  padding: 12px 18px;
  font-size: 1rem;
  cursor:pointer;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
  background: transparent;
}

button:active, a.button:active, .button:active{ transform: scale(0.98); }

.primary{
  color:white;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 10px 20px rgba(255,77,109,.25);
}
.primary:hover{ filter: brightness(1.03); }

.secondary{
  background: #ffd1dc;
  color: #7a1f35;
  box-shadow: 0 8px 16px rgba(122,31,53,.10);
}
.secondary:hover{ filter: brightness(1.02); }

.small{ font-size:.95rem; padding: 10px 14px; }

.note{
  background: rgba(255,240,244,.9);
  border: 1px solid rgba(255,77,109,.18);
  border-radius: 16px;
  padding: 14px;
  margin-top: 16px;
  text-align:left;
}

.hidden{ display:none; }

.countdown{
  font-size: 1.55rem;
  font-weight: 800;
  letter-spacing:.3px;
}

/* Photos */
.photo {
  width: 100%;
  max-width: 520px;
  margin: 14px auto 6px;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 14px 30px rgba(0,0,0,.10);
  border: 1px solid rgba(255,255,255,.6);
}
.photo img { display:block; width:100%; height:auto; }

/* Canvas */
canvas{
  width: min(560px, 92vw);
  height: auto;
  border-radius: 18px;
  background: #ffffff;
  box-shadow: 0 16px 35px rgba(0,0,0,.10);
  touch-action:none;
}

/* Game HUD/controls */
.hud{
  margin-top: 12px;
  display:flex;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}
.pill{
  background:#fff0f4;
  padding:10px 12px;
  border-radius:999px;
  font-weight:700;
  border:1px solid rgba(255,77,109,.18);
}
.controls{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top: 10px;
}
.range-pill{
  display:flex;
  align-items:center;
  gap:10px;
}
input[type="range"] { width: 160px; }

.debug{
  margin:0;
  font-family: ui-monospace, Menlo, Consolas, monospace;
  font-size:12px;
  white-space: pre-wrap;
}

/* --- Win Overlay --- */
.overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: radial-gradient(circle at top, rgba(255,232,241,.92), rgba(255,240,246,.96));
  backdrop-filter: blur(6px);
  z-index: 999;
  opacity: 0;
  pointer-events: none;
  transition: opacity .35s ease;
  overflow: hidden;
}
.overlay.show {
  opacity: 1;
  pointer-events: auto;
}

.overlay-card {
  width: min(640px, 92vw);
  border-radius: 26px;
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(255,255,255,.6);
  box-shadow: 0 22px 60px rgba(0,0,0,.18);
  padding: 22px;
  text-align: center;
  transform: translateY(14px) scale(.96);
  opacity: 0;
  transition: transform .45s cubic-bezier(.2,.9,.2,1), opacity .45s ease;
}
.overlay.show .overlay-card {
  transform: translateY(0) scale(1);
  opacity: 1;
}

.big-title {
  font-size: 2rem;
  margin: 0 0 6px;
  letter-spacing: .2px;
}
.sub {
  margin: 0 0 14px;
  opacity: .9;
  line-height: 1.5;
}

.coupon {
  text-align:left;
  background: rgba(255,255,255,.85);
  border: 2px dashed rgba(255,77,109,.55);
  border-radius: 18px;
  padding: 14px;
  margin-top: 10px;
}
.coupon h3 { margin: 0 0 6px; }
.coupon .big { font-size: 1.15rem; font-weight: 900; }
.coupon p { margin: 8px 0 0; }

/* floating hearts (DOM elements) */
.float-heart {
  position: absolute;
  left: 50%;
  top: 110%;
  transform: translateX(-50%);
  font-size: 22px;
  opacity: 0;
  filter: drop-shadow(0 10px 12px rgba(0,0,0,.10));
  animation: rise var(--dur) ease-in forwards;
  pointer-events: none;
  user-select: none;
}
@keyframes rise {
  0%   { transform: translateX(var(--x)) translateY(0) rotate(var(--r)); opacity: 0; }
  12%  { opacity: 1; }
  100% { transform: translateX(calc(var(--x) * 1.6)) translateY(-140vh) rotate(calc(var(--r) * 2.2)); opacity: 0; }
}

/* sparkle burst */
.sparkle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,77,109,.65);
  opacity: 0;
  animation: pop var(--dur) ease-out forwards;
  pointer-events: none;
}
@keyframes pop {
  0%   { transform: translate(-50%, -50%) scale(.2); opacity: 0; }
  15%  { opacity: 1; }
  100% { transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(0); opacity: 0; }
}

a.button.primary, button.primary, .button.primary {
  color: #fff !important;
  -webkit-text-fill-color: #0f0c0c; /* fixes Safari/Chrome edge cases */
  text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}

